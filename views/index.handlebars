
<h2 class="page-header">Dashboard</h2>
<p>Welcome to your dashboard</p>  
{{#each results1}}
    <input type= "hidden" name="totalTarget", id="totalTarget" value="{{totalTarget}}">
    <input type= "hidden" name="totalActual", id="totalActual" value="{{totalActual}}">
{{/each}}

{{#each results2}}
    <input type= "hidden" name="totalTarget2", id="totalTarget2" value="{{totalTarget2}}">
    <input type= "hidden" name="totalActual2", id="totalActual2" value="{{totalActual2}}">
{{/each}}


<script type="text/javascript">
window.onload = function() {
CanvasJS.addColorSet("kmsTone",
    [
    "#0698D5",
    "#AAC998"
    ]);

var inProgress_AI = $('#totalTarget').val();
var completed_AI = $('#totalActual').val();

var inProgress_AI2 = $('#totalTarget2').val();
var completed_AI2 = $('#totalActual2').val();




var chart = new CanvasJS.Chart("chartContainer1", {
	animationEnabled: true,
    colorSet: "kmsTone",
	title: {
        fontFamily: "tahoma",
		text: "Status of KMS Action Items in Open Projects"
	},
	data: [{
		type: "pie",
		startAngle: 270,
		indexLabel: "{label} {y}",
		dataPoints: [
			{y: inProgress_AI, label: "In Progress"},
			{y: completed_AI, label: "Completed"}
		]
	}]
});
chart.render();

var chart = new CanvasJS.Chart("chartContainer2", {
	animationEnabled: true,
    colorSet: "kmsTone",
	title: {
        fontFamily: "tahoma",
		text: "Status of External Action Items in Open Projects"
	},
	data: [{
		type: "pie",
		startAngle: 270,
		indexLabel: "{label} {y}",
		dataPoints: [
			{y: inProgress_AI2, label: "In Progress"},
			{y: completed_AI2, label: "Completed"}
		]
	}]
});

chart.render();


}
</script>

<div class="row" style="margin-right: 200px;">
<div id="chartContainer1" style="width: 50%; height: 400px;float:left;"></div> 
<div id="chartContainer2" style="width: 50%; height: 400px;"></div> </br>
</div>


<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

<section class="row text-left">

    <div class="col-sm-5 placeholder" style="border-radius: 15px; border: 2px solid #BFBFBF; padding: 10px;  margin: 10px; overflow: scroll; height: 500px;">
        <br>
        <h4>KMS Action Items</h4>
        <br>

        <form action="/" method="GET">
            <select class="form-control" name="myselect" id="myselect" onchange="this.form.submit()">
            <option value="1">Due This Week</option>
            <option value="2">Due This 2 Weeks</option>
            <option value="3">Due This Month</option>
            <option value="4">Past Due</option>
            </select>
        </form>
        <br>
        <table style="table-layout:fixed; width:100%" class="table table-sm">
        <thead>
            <th>Project Name</th>
            <th>Action Item</th>
            <th>Target Completion</th>
        </thead>
        <tbody>
        {{#each results0}}
        <form action= "/projects/project_details" method="POST">
        <tr>
            <input type= "hidden" name="projectID", id="projectID" value="{{projectID}}">
            <td><input style="width:100%" class="btn btn-info my-2 my-sm-0" type="submit" value="{{projectName}}" /></td> 
            <td>{{actionItemDescription}}</td> 
            <td>{{#if targetCompletionDate}}{{formatDate targetCompletionDate}}{{/if}}</td>
        </tr>
        </form>
        {{/each}}
        </tbody>
        </table>
        
        <br>
    </div>



    <div class="col-sm-5 placeholder" style="border-radius: 15px; border: 2px solid #BFBFBF; padding: 10px;  margin: 10px; overflow: scroll; height: 500px;">
        <br>
        <h4>External Action Items</h4>
        <br>

        <form action="/" method="GET">
            <select class="form-control" name="myselect" id="myselect" onchange="this.form.submit()">
            <option value="1">Due This Week</option>
            <option value="2">Due This 2 Weeks</option>
            <option value="3">Due This Month</option>
            <option value="4">Past Due</option>
            </select>
        </form>
        <br>
        <table style="table-layout:fixed; width:100%" class="table table-sm">
        <thead>
            <th>Project Name</th>
            <th>Action Item</th>
            <th>Target Completion</th>
        </thead>
        {{#each results}}
        <form action= "/projects/project_details" method="POST">
        <tr>
            <input type= "hidden" name="projectID", id="projectID" value="{{projectID}}">
            <td><input style="width:100%" class="btn btn-primary my-2 my-sm-0" type="submit" value="{{projectName}}" /></td> 
            <td>{{actionItemDescription}}</td> 
            <td>{{formatDate targetCompletionDate}}</td>
        </tr>
        </form>
        {{/each}}
        </table>
        <br>
    
    </div>
</section>
